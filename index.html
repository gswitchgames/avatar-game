<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="game.css?v=1">
    <title>Avatar Game</title>
</head>
<script>
    function UnityCallPlayJs() {
      console.log("untiy call play game");
    }
    function UnityCallEndgameJs() {
      console.log("untiy call end game");
    }
    function UnityCallAgainJs() {
      console.log("unity call again");
    }
    function UnityCallShowLevelJs() {
      console.log("unity call show level");
    }
    function UnityCalChangeLevelJs() {
      console.log("untiy call change level");
    }
    function UnityCallReturnHomeJs() {
      console.log("untiy call return home");
    }
    function UnityCallContinueJs() {
      console.log("untiy call continue");
    }
    function UnityCallChangeModeJs() {
      console.log("untiy call change mode");
    }
    function UnityCallLeveCompleteJs() {
      console.log("untiy call level complete");
    }
    function UnityCallPauseGameJs() {
      console.log("untiy call pause game");
    }
</script>
<body>
    <div id="gameContainer"></div>
    <div id="loader">
        <div class="container">
            <img class="logo" src="image/logo.png">
            <div class="loading"></div>
        </div>  
        <div id="_progress"> 0% </div>
    </div>
</body>

<script src="Build/UnityLoader.js"></script>
<script>
    UnityLoader.compatibilityCheck = function (e, t, r) { t(); };
    var gameInstance = UnityLoader.instantiate("gameContainer", "Build/BuildNewChar.json", { onProgress: UnityProgress });
    function UnityProgress(gameInstance, progress) {
        if (!gameInstance.Module) {
            return;
        }
        const loader = document.querySelector("#loader");
        document.getElementById("_progress").innerHTML = progress * 100 + "%";
        if (progress === 1 && !gameInstance.removeTimeout) {
            gameInstance.removeTimeout = setTimeout(function () {
                loader.style.display = "none";
            }, 2000);
        }
    }
    
    var theElement = document.getElementById("gameContainer");
    theElement.addEventListener("mouseup", tapOrClick, false);
    theElement.addEventListener("touchend", tapOrClick, false);

    function tapOrClick(event) {
        fullScreenAPI();
        event.preventDefault();
        return false;
    }

    function fullScreenAPI() {
        var ua = navigator.userAgent.toLowerCase();
        var isAndroid = ua.indexOf("android") > -1;
        if (isAndroid) {
            GoFullScreen(document.documentElement);
        }
    }

    function GoFullScreen(element) {
        if (!document.fullscreenElement && !document.mozFullScreenElement && !document.webkitFullscreenElement && !document.msFullscreenElement) {
            if (element.requestFullscreen && document.fullscreenEnabled) {
                element.requestFullscreen();
            }
            else if (element.mozRequestFullScreen) {
                element.mozRequestFullScreen();
            }
            else if (element.webkitRequestFullscreen) {
                element.webkitRequestFullscreen();
            }
            else if (element.msRequestFullscreen) {
                element.msRequestFullscreen();
            }
        }
    }
</script>
</html>

